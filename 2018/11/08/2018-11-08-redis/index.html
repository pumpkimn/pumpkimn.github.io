<!DOCTYPE html>
<html lang="en">
  <!-- Head tag -->
  <head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <!-- Title -->
  
  <title>Redis - 李想</title>

  <!--Favicon-->
  <link rel="icon" href="favicon/favicon.ico">

  <!--Description-->
  
      <meta name="description" content="Redis
 学习Redis基础知识
 学习Redis持久化
 集成spring
 加入到spring项目中
菜鸟教程

Redis 基本操作
启动 : 如没配置环境变量 CD 到Redis所在盘符 redis-server.exe redis.windows.conf
登陆 : 如设置了密码 re">
  

  <!--Author-->
  
      <meta name="author" content="李想">
  

  <!-- Pure CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css" integrity="sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ" crossorigin="anonymous">
  <link href="https://fonts.googleapis.com/css?family=Crimson+Text|Open+Sans:300,800" rel="stylesheet">

  <!-- Custom CSS -->
  <link rel="stylesheet" href="/css/styles.css">

  <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->

  <!-- Google Analytics -->
  

</head>


  <body>
  	<div class="container-fluid navbar-container m-sm-5">
      <!-- Header -->
      <nav class="navbar navbar-toggleable-sm navbar-light px-1 py-3 my-3 mb-sm-5">
  <a class="navbar-brand ml-2" href="/">李想</a>
  <button class="navbar-toggler navbar-toggler-right py-2" type="button" data-toggle="collapse" data-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  <div class="collapse navbar-collapse text-center" id="navbarCollapse">
    <ul class="navbar-nav ml-auto my-auto">
      
    </ul>
    <hr class="hidden-md-up">
  </div>
</nav>


  		<div class="row">
  			<div class="col-12 mb-4">
  <img class="img-fluid project-img" src="/images/unsplash.jpg" alt="Redis">
</div>
<div class="col-lg-4 col-12 pt-3 px-4 pr-lg-5">
  <h1>Redis</h1>
</div>
<div class="col-lg-8 col-12 pt-lg-3 mb-4 pl-lg-5 px-lg-0 px-4 portfolio-content">
  <h1 id="Redis"><a href="#Redis" class="headerlink" title="Redis"></a>Redis</h1><ul>
<li style="list-style: none"><input type="checkbox"> 学习Redis基础知识</li>
<li style="list-style: none"><input type="checkbox"> 学习Redis持久化</li>
<li style="list-style: none"><input type="checkbox"> 集成spring</li>
<li style="list-style: none"><input type="checkbox"> 加入到spring项目中<blockquote>
<p><a href="http://www.runoob.com/redis/redis-tutorial.html" target="_blank" rel="noopener">菜鸟教程</a></p>
</blockquote>
<h2 id="Redis-基本操作"><a href="#Redis-基本操作" class="headerlink" title="Redis 基本操作"></a>Redis 基本操作</h2></li>
<li>启动 : 如没配置环境变量 CD 到Redis所在盘符 redis-server.exe redis.windows.conf</li>
<li>登陆 : 如设置了密码 redis-cli –raw -h 127.0.01 -p 6379 -a “xxx” 没则 去掉 -a “xxx”</li>
</ul>
<pre><code>&gt; 加入 --raw 以避免中文乱码
</code></pre><ul>
<li>获取配置项 : CONFIG GET CONFIG_SETTING_NAME</li>
<li>获取配置 : CONFIG SET CONFIG_SETTING_NAME NEW_CONFIG_VALUE</li>
<li>选择数据库 : SELECT[0-15]</li>
<li>验证密码 : AUTH[password]<h2 id="Redis-数据类型"><a href="#Redis-数据类型" class="headerlink" title="Redis 数据类型"></a>Redis 数据类型</h2>Redis 支持五中数据类型 : String(字符串)  Hash(哈希散列) List(列表) Set(集合) 以及Zset(sorted set 有序集合)<h3 id="String"><a href="#String" class="headerlink" title="String"></a>String</h3>String 是 redis 最基本的数据类型，一个 key 对应一个 value。<br>String类型是二进制安全的。意思是 redis 的 String 可以包含任何数据。比如 jpg 图片或者序列化对象。<br>String 类型是 Redis 最基本的数据类型， String 类型的值最大能存储 512MB。<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt; SET name &quot;runoob&quot;</span><br><span class="line">Ok</span><br><span class="line"></span><br><span class="line">&gt; Get name</span><br><span class="line">&quot;runoob&quot;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="Hash"><a href="#Hash" class="headerlink" title="Hash"></a>Hash</h3><p>Redis Hash 是一个键值(key -&gt;  value )对集合。<br>Redis Hash 是一个 String 类型 的 fileId 和 value 的映射表，Hash 特别适合用于存储对象。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&gt; HMSET myhash fileId1 lee fileId2 xiang</span><br><span class="line">OK</span><br><span class="line"></span><br><span class="line">&gt; HGET myhash fileId1</span><br><span class="line">&quot;lee&quot;</span><br><span class="line"></span><br><span class="line">&gt; HGET myhash fileId2</span><br><span class="line">&quot;xiang&quot;</span><br></pre></td></tr></table></figure></p>
<p>每个Hash可以存储2<sup>32</sup>-1 键值对。</p>
<h3 id="List"><a href="#List" class="headerlink" title="List"></a>List</h3><p>Redis 列表是简单的字符串列表，按照插入顺序排序。你可以添加一个元素到列表的头部(左边)或者尾部(右边)。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&gt; lpush runoob redis</span><br><span class="line">（integer）1</span><br><span class="line"></span><br><span class="line">&gt; lpush runoob mongodb</span><br><span class="line">（integer）2</span><br><span class="line"></span><br><span class="line">&gt; lpush runoob rabitmq</span><br><span class="line">（integer）3</span><br><span class="line"></span><br><span class="line">&gt; lrange runoob 0 -1</span><br><span class="line">1) &quot;rabitmq&quot;</span><br><span class="line">2) &quot;mongodb&quot;</span><br><span class="line">3) &quot;redis&quot;</span><br></pre></td></tr></table></figure></p>
<p>列表最多可存储2<sup>32</sup>-1 元素</p>
<h3 id="Set"><a href="#Set" class="headerlink" title="Set"></a>Set</h3><p>Redis 的 Set 是 String 类型的无序集合。<br>集合是通过哈希表实现的，所以添加，删除，查找的复杂度是 O(1)。</p>
<h4 id="sadd-命令"><a href="#sadd-命令" class="headerlink" title="sadd 命令"></a>sadd 命令</h4><p>添加一个 String 元素到 key 对应的 Set 集合中，成功返回 1 ，如果元素已经在集合中则返回 0 ，如果 key 对应的 Set 不存在则返回错误。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&gt; sadd runoob reids</span><br><span class="line">（integer）1</span><br><span class="line"></span><br><span class="line">&gt; sadd runoob mongodb</span><br><span class="line">（integer）1</span><br><span class="line"></span><br><span class="line">&gt; sadd runoob rabitmq</span><br><span class="line">（integer）1</span><br><span class="line"></span><br><span class="line">&gt; sadd runoob rabitmq</span><br><span class="line">（integer）0</span><br><span class="line"></span><br><span class="line">&gt; smembers runoob</span><br><span class="line">1) &quot;rabitmq&quot;</span><br><span class="line">2) &quot;mangodb&quot;</span><br><span class="line">3) &quot;redis&quot;</span><br></pre></td></tr></table></figure></p>
<p>集合中最大的成员数为 2<sup>32</sup>-1。</p>
<h3 id="Zset-Sorted-Set"><a href="#Zset-Sorted-Set" class="headerlink" title="Zset ( Sorted Set)"></a>Zset ( Sorted Set)</h3><p>Redis Zset 和 Set 一样也是 String 类型元素的集合，且不允许重复的成员。<br>不同的是每个元素都会关联一个 double 类型的分数。redis 正式通过分数来为集合中的成员进行<strong>从小到大</strong>的排序。<br>Zset 的成员是唯一的，但分数( score )却可以重复。</p>
<h4 id="zadd-命令"><a href="#zadd-命令" class="headerlink" title="zadd 命令"></a>zadd 命令</h4><p>添加元素到集合，元素在集合中存在则更新对象 score<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">zadd key score member</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&gt; zadd runoob 0 redis</span><br><span class="line">（integer）1</span><br><span class="line"></span><br><span class="line">&gt; zadd runoob 0 mongodb</span><br><span class="line">（integer）1</span><br><span class="line"></span><br><span class="line">&gt; zadd runoob 0 rabitmq</span><br><span class="line">（integer）1</span><br><span class="line"></span><br><span class="line">&gt; zadd runoob 0 rabitmq</span><br><span class="line">（integer）0</span><br><span class="line"></span><br><span class="line">&gt; zadd runoob 1 python</span><br><span class="line">（integer）1</span><br><span class="line"></span><br><span class="line">&gt; zadd runoob 10 jquery</span><br><span class="line">（integer）1</span><br><span class="line"></span><br><span class="line">&gt; zadd runoob 15 vue</span><br><span class="line">（integer）1</span><br><span class="line"></span><br><span class="line">&gt; ZRANGEBYSCORE runoob 0 1000</span><br><span class="line">1) &quot;mongodb&quot;</span><br><span class="line">2) &quot;rabitmq&quot;</span><br><span class="line">3) &quot;redis&quot;</span><br><span class="line">4) &quot;python&quot;</span><br><span class="line">5) &quot;jquery&quot;</span><br><span class="line">6) &quot;vue&quot;</span><br></pre></td></tr></table></figure>
<h3 id="各个数据类型"><a href="#各个数据类型" class="headerlink" title="各个数据类型"></a>各个数据类型</h3><table>
<thead>
<tr>
<th style="text-align:center">类型</th>
<th style="text-align:center">简介</th>
<th style="text-align:center">特性</th>
<th style="text-align:center">场景</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">String</td>
<td style="text-align:center">二进制安全</td>
<td style="text-align:center">可以包含任何数据，比如 jpg 图片 或者序列化的对象，一个键最大能存储512M</td>
<td style="text-align:center">—</td>
</tr>
<tr>
<td style="text-align:center">Hash</td>
<td style="text-align:center">键值对集合，即编程语言中的 Map 类型</td>
<td style="text-align:center">适合存储对象，并且可以像数据库中的 update 一个属性一样只修改某一项属性值（Memcached 中需要取出整个字符串反序列化对象修改完再序列化存回去）</td>
<td style="text-align:center">存储、读取、修改用户属性</td>
</tr>
<tr>
<td style="text-align:center">List</td>
<td style="text-align:center">链表（双向链表）</td>
<td style="text-align:center">增删快，提供了操作某一元素的 API</td>
<td style="text-align:center">1.最新消息、排行等功能（比如朋友圈的时间线）2.消息队列</td>
</tr>
<tr>
<td style="text-align:center">Set</td>
<td style="text-align:center">哈希表实现，元素不重复</td>
<td style="text-align:center">1.添加、删除、查找的复杂度都是 O(1)。2.为集合提供了求交集、并集、差集等操作</td>
<td style="text-align:center">1.共同好友。2.利用唯一性，统计访问网站的所有独立 Ip。 3.好友推荐时，根据 tag 求交集，大于某个阈值就可以推荐</td>
</tr>
<tr>
<td style="text-align:center">Sorted Set</td>
<td style="text-align:center">将 Set 中的元素增加一个权重参数 score ，元素按 score 有序排列</td>
<td style="text-align:center">数据插入集合时，已经进行天然排序</td>
<td style="text-align:center">1.排行榜。2.带权重的消息队列</td>
</tr>
</tbody>
</table>
<h3 id="多个数据库"><a href="#多个数据库" class="headerlink" title="多个数据库"></a>多个数据库</h3><p>Redis 支持多个数据库，并且每个数据库的数据<strong>隔离的不能共享</strong>，并且基于单机才有，如果是集群就没有数据库的概念。</p>
<p>Redis 是一个字典结构的存储服务器，而实际上一个 Redis 实例提供了多个用来存储数据的字典，客户端可以指定数据库存储在哪个字段中。<br>这与我们熟知的在一个关系数据库实例中可以创建多个数据库类似，所以可以将其中的每个字典都理解成一个独立的数据库。</p>
<p>每个数据库对外都是一个从 0 开始的递增数字命名 , Redis 默认支持 16 个数据库( 可以通过配置文件支持多个,无上限 ) , 可以通过<strong>配置 databases</strong>来修改这一数字.<br>客户端与Redis 建立连接后会自动选择 0 号数据库,不过可以随时通过使用 <strong>SELECT</strong>命令来更换数据库。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">redis &gt; SELECT 1</span><br><span class="line">OK</span><br><span class="line"></span><br><span class="line">redis [1] &gt; GET foo </span><br><span class="line">(nil)</span><br></pre></td></tr></table></figure></p>
<p>然而这些以数字命名的数据库又与我们的理解的数据库有所区别。<br>首先 Redis 不支持自定义数据库的名字，每个数据库都以编号命名，开发者必须自己记录哪些数据库存储了哪些数据。<br>另外 Redis 不支持为每个数据库设置不同的密码，所以一个客户端要么访问全部的数据库，要么连一个数据库也没有访问权限。<br>最重要的一点是多个数据库之间<strong>并不是完全隔离的</strong>，比如FLUSHALL 命令可以清空一个 Redis 实例中所有数据库中的数据。<br>综上所述，这些数据库更像是一种命名空间，而不适宜存储不同应用程序的数据，<br>比如可以使用 0 号数据库存储某个应用生产环境中的数据，使用 1 号数据库存储测试环境中的数据，但不适宜用 0 号数据库存储 A 应用的数据而使用 1 号数据库存储 B 应用的数据，<strong>不同的应用应该使用不同的 Redis 实例存储数据</strong>。</p>
<p>由于 Redis 非常轻量级，一个空 Redis 实例占用的内存只有 1M 左右，所以不用担心多个 Redis 实例会额外占用很多内存。</p>
<h2 id="Redis-键-key"><a href="#Redis-键-key" class="headerlink" title="Redis 键(key)"></a>Redis 键(key)</h2><p>Redis 键命令用于管理 redis 的键。</p>
<h3 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h3><p>Redis 键命令的基本语法如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt; COMMAND KEY_NAME</span><br></pre></td></tr></table></figure></p>
<h3 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt; SET runoobkey redis</span><br><span class="line">OK</span><br><span class="line"></span><br><span class="line">&gt; DEL runoobkey</span><br><span class="line">（integer）1</span><br></pre></td></tr></table></figure>
<p>在以上实例中<strong>DEL</strong>是一个命令，<strong>runoobkey</strong>是一个键。<br>如果键被删除成功，命令执行后输出<strong>(integer) 1</strong>，否则将输出<strong>(integer) 0</strong>。</p>
<h3 id="Redis-keys-命令"><a href="#Redis-keys-命令" class="headerlink" title="Redis keys 命令"></a>Redis keys 命令</h3><table>
<thead>
<tr>
<th style="text-align:center">序号</th>
<th style="text-align:center">命令及描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">1</td>
<td style="text-align:center"><a href="#del_key">DEL_key</a><br>该命令用于在 key 存在时删除 key。</td>
</tr>
<tr>
<td style="text-align:center">2</td>
<td style="text-align:center"><a href="#dump_key">DUMP_key</a><br>序列化给定 key，并返回被序列化的值</td>
</tr>
<tr>
<td style="text-align:center">3</td>
<td style="text-align:center"><a href="#redis-exists-命令">EXISTS_key</a><br>检查给定的 key 是否存在。</td>
</tr>
<tr>
<td style="text-align:center">4</td>
<td style="text-align:center"><a href="#redis-expire-命令">EXPIRE_key</a> seconds <br> 为给定 key 设置过期时间，以秒计。</td>
</tr>
<tr>
<td style="text-align:center">5</td>
<td style="text-align:center"><a href="http://www.runoob.com/redis/keys-expireat.html" target="_blank" rel="noopener">EXPIREAT_key_timestamp</a><br> EXPIREAT 的作用和 EXPIRE 类似,都用于为 key 设置过期时间。不同在于 EXPIREAT 命令接受的时间参数是 UNIX 时间戳（unix timestamp</td>
</tr>
<tr>
<td style="text-align:center">6</td>
<td style="text-align:center"><a href="http://www.runoob.com/redis/keys-pexpire.html" target="_blank" rel="noopener">PEXPIRE_key_milliseconds</a> <br> 设置 key 的过期时间，以毫秒计。</td>
</tr>
<tr>
<td style="text-align:center">7</td>
<td style="text-align:center"><a href="http://www.runoob.com/redis/keys-pexpireat.html" target="_blank" rel="noopener">PEXPIREAT key milliseconds-timestamp</a> <br> 设置 key 过期时间的时间戳(unix timestamp)，以毫秒计。</td>
</tr>
<tr>
<td style="text-align:center">8</td>
<td style="text-align:center"><a href="#redis-keys-命令">KEYS pattern</a> <br> 查找所有符合模式（pattern）的 key。</td>
</tr>
<tr>
<td style="text-align:center">9</td>
<td style="text-align:center"><a href="#redis-move-命令">MOVE key db</a> <br> 将当前数据库的 key 移动到给定的数据库 db 当中。</td>
</tr>
<tr>
<td style="text-align:center">10</td>
<td style="text-align:center"><a href="#redis-persist-命令">PERSIST key</a> <br> 移除 key 的过期时间，key 将持久保持。</td>
</tr>
<tr>
<td style="text-align:center">11</td>
<td style="text-align:center"><a href="#redis-pttl-命令">PTTL key</a> <br> 以毫秒为单位返回 key 的剩余过期时间。</td>
</tr>
<tr>
<td style="text-align:center">12</td>
<td style="text-align:center"><a href="#redis-ttl-命令">TTL key</a> <br> 以秒为单位，返回给定 key 的剩余生存时间（TTL,time to live）。</td>
</tr>
<tr>
<td style="text-align:center">13</td>
<td style="text-align:center"><a href="#redis-randowmkey-命令">RANDOMKEY</a> <br> 从当前数据库中随机返回一个 key。</td>
</tr>
<tr>
<td style="text-align:center">14</td>
<td style="text-align:center"><a href="#redis-rename-命令">RENAME key newkey</a> <br> 从当前数据库中随机返回一个 key。</td>
</tr>
<tr>
<td style="text-align:center">15</td>
<td style="text-align:center"><a href="#redis-renamenx-命令">RENAMENX key newkey</a> <br> 仅当 newkey 不存在时，将 key 改名为 newkey。</td>
</tr>
<tr>
<td style="text-align:center">16</td>
<td style="text-align:center"><a href="#redis-type-命令">TYPE key</a> <br> 返回 key 所存储的值的类型。</td>
</tr>
</tbody>
</table>
<h2 id="Redis-字符串-String"><a href="#Redis-字符串-String" class="headerlink" title="Redis 字符串(String)"></a>Redis 字符串(String)</h2><p>Redis 字符串数据类型的相关命令用于管理 redis 字符串值，基本语法如下：</p>
<h3 id="语法-1"><a href="#语法-1" class="headerlink" title="语法"></a>语法</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt; COMMAND KEY_NAME</span><br></pre></td></tr></table></figure>
<h3 id="Redis-字符串命令"><a href="#Redis-字符串命令" class="headerlink" title="Redis 字符串命令"></a>Redis 字符串命令</h3><table>
<thead>
<tr>
<th style="text-align:center">序号</th>
<th style="text-align:left">命令及描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">1</td>
<td style="text-align:left"><a href="#redis-set-命令">SET key value</a> <br> 设置指定 key 的值。</td>
</tr>
<tr>
<td style="text-align:center">2</td>
<td style="text-align:left"><a href="#redis-get-命令">GET key</a> <br> 获取指定 key 的值。</td>
</tr>
<tr>
<td style="text-align:center">3</td>
<td style="text-align:left"><a href="#redis-getrange-命令">GETRANGE key start end</a> <br> 返回 key 中字符串值得子字符。</td>
</tr>
<tr>
<td style="text-align:center">4</td>
<td style="text-align:left"><a href="#redis-getset-命令">GETSET key value</a> <br> 将给定 key 的值设为 value，并返回 key 的旧值（old value）。</td>
</tr>
<tr>
<td style="text-align:center">5</td>
<td style="text-align:left"><a href="#redis-getbit-命令">GETBIT key offset</a> <br> 对 key 所储存的字符值，获取指定偏移量上的位（bit）。</td>
</tr>
<tr>
<td style="text-align:center">6</td>
<td style="text-align:left"><a href="#redis-mget-命令">MGET key1 [key2..]</a> <br> 获取所有（一个或多个）给定 key 的值。</td>
</tr>
<tr>
<td style="text-align:center">7</td>
<td style="text-align:left"><a href="#redis-setbit-命令">SETBIT key offset value</a> <br> 对 key 所储存的字符串值，设置或清除指定偏移量上的位（bit）。</td>
</tr>
<tr>
<td style="text-align:center">8</td>
<td style="text-align:left"><a href="#redis-setex-命令">SETEX key seconds value</a> <br> 将值 value 关联到 key，并将 key 的过期时间设为 seconds（以秒为单位）。</td>
</tr>
<tr>
<td style="text-align:center">9</td>
<td style="text-align:left"><a href="#redis-setnx-命令">SETNX key value</a> <br> 只有在 key 不存在时设置 key 的值。</td>
</tr>
<tr>
<td style="text-align:center">10</td>
<td style="text-align:left"><a href="#redis-setrange-命令">SETRANGE key offset value</a> <br> 用 value 参数覆写给定 key 所储存的字符串值，从偏移量 offset 开始。</td>
</tr>
<tr>
<td style="text-align:center">11</td>
<td style="text-align:left"><a href="#redis-strlen-命令">STRLEN key</a> <br> 返回 key 所储存的字符串值得长度。</td>
</tr>
<tr>
<td style="text-align:center">12</td>
<td style="text-align:left"><a href="#redis-mset-命令">MSET key value [key value …]</a> <br> 同时设置一个或多个 key-value 对。</td>
</tr>
<tr>
<td style="text-align:center">13</td>
<td style="text-align:left"><a href="#redis-msetnx-命令">MSETNX key value [key value …]</a> <br> 同时设置一个或多个 key-value 对，当且仅当所有给定 key 都不存在。</td>
</tr>
<tr>
<td style="text-align:center">14</td>
<td style="text-align:left"><a href="#redis-psetex-命令">PSETEX key milliseconds value</a> <br> 这个命令和 SETEX 命令相似，但它以毫秒为单位设置 key 的生存时间。</td>
</tr>
<tr>
<td style="text-align:center">15</td>
<td style="text-align:left"><a href="#redis-incr-命令">INCR key</a> <br> 将 key 中储存的数字值增一。</td>
</tr>
<tr>
<td style="text-align:center">16</td>
<td style="text-align:left"><a href="#redis-incrby-命令">INCRBY key increment</a> <br> 将 key 所储存的值加上给定的增量值（increment）。</td>
</tr>
<tr>
<td style="text-align:center">17</td>
<td style="text-align:left"><a href="#redis-incrbyfloat-命令">INCRBYFLOAT key increment</a> <br> 将 key 所储存的值加上给定的浮点增量值（increment）。</td>
</tr>
<tr>
<td style="text-align:center">18</td>
<td style="text-align:left"><a href="#redis-decr-命令">DECR key</a> <br> 将 key 中储存的数字值减一。</td>
</tr>
<tr>
<td style="text-align:center">19</td>
<td style="text-align:left"><a href="#redis-decrby-命令">DECRBY key decrement</a> <br> key 所储存的值减去给定的减量值（decrement）。</td>
</tr>
<tr>
<td style="text-align:center">20</td>
<td style="text-align:left"><a href="#redis-append-命令">APPEND key value</a> <br> 如果 key 已经存在并且是一个字符串，APPEND 命令将指定的 value 追加到该 key 原来值（value）末尾。</td>
</tr>
</tbody>
</table>
<h2 id="Redis-哈希-Hash"><a href="#Redis-哈希-Hash" class="headerlink" title="Redis 哈希(Hash)"></a>Redis 哈希(Hash)</h2><h2 id="Redis-列表-List"><a href="#Redis-列表-List" class="headerlink" title="Redis 列表(List)"></a>Redis 列表(List)</h2><h2 id="Redis-集合-Set"><a href="#Redis-集合-Set" class="headerlink" title="Redis 集合(Set)"></a>Redis 集合(Set)</h2><h2 id="Redis-有序集合-sorted-set"><a href="#Redis-有序集合-sorted-set" class="headerlink" title="Redis 有序集合(sorted set)"></a>Redis 有序集合(sorted set)</h2><h2 id="Redis-HyperLogLog"><a href="#Redis-HyperLogLog" class="headerlink" title="Redis HyperLogLog"></a>Redis HyperLogLog</h2><h2 id="Redis-发布订阅"><a href="#Redis-发布订阅" class="headerlink" title="Redis 发布订阅"></a>Redis 发布订阅</h2><h2 id="Redis-事务"><a href="#Redis-事务" class="headerlink" title="Redis 事务"></a>Redis 事务</h2><h2 id="Redis-脚本"><a href="#Redis-脚本" class="headerlink" title="Redis 脚本"></a>Redis 脚本</h2><h2 id="Redis-连接"><a href="#Redis-连接" class="headerlink" title="Redis 连接"></a>Redis 连接</h2><h2 id="Redis-服务器"><a href="#Redis-服务器" class="headerlink" title="Redis 服务器"></a>Redis 服务器</h2><h2 id="Redis-数据备份与恢复"><a href="#Redis-数据备份与恢复" class="headerlink" title="Redis 数据备份与恢复"></a>Redis 数据备份与恢复</h2><h2 id="Redis-安全"><a href="#Redis-安全" class="headerlink" title="Redis 安全"></a>Redis 安全</h2><h2 id="Redis-性能测试"><a href="#Redis-性能测试" class="headerlink" title="Redis 性能测试"></a>Redis 性能测试</h2><h2 id="Redis-客户端连接"><a href="#Redis-客户端连接" class="headerlink" title="Redis 客户端连接"></a>Redis 客户端连接</h2><h2 id="Redis-管道技术"><a href="#Redis-管道技术" class="headerlink" title="Redis 管道技术"></a>Redis 管道技术</h2><h2 id="Redis-分区"><a href="#Redis-分区" class="headerlink" title="Redis 分区"></a>Redis 分区</h2><h2 id="Java-使用-Redis"><a href="#Java-使用-Redis" class="headerlink" title="Java 使用 Redis"></a>Java 使用 Redis</h2><h2 id="Redis-键-命令详情"><a href="#Redis-键-命令详情" class="headerlink" title="Redis 键 命令详情"></a>Redis 键 命令详情</h2><h3 id="DEL-key"><a href="#DEL-key" class="headerlink" title="DEL key"></a>DEL key</h3><p>Redis DEL 命令用于删除已存在的键。不存在的 key 会被忽略。</p>
<h4 id="语法-2"><a href="#语法-2" class="headerlink" title="语法"></a>语法</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt; DEL KEY_NAME</span><br></pre></td></tr></table></figure>
<h4 id="可用版本"><a href="#可用版本" class="headerlink" title="可用版本"></a>可用版本</h4><p>&gt;= 1.0.0</p>
<h4 id="返回值"><a href="#返回值" class="headerlink" title="返回值"></a>返回值</h4><p>被删除 key 的数量</p>
<h3 id="DUMP-key"><a href="#DUMP-key" class="headerlink" title="DUMP key"></a>DUMP key</h3><p>Redis DUMP 命令用于序列化给定 key，并返回被序列化的值。</p>
<h4 id="语法-3"><a href="#语法-3" class="headerlink" title="语法"></a>语法</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt; DUMP KEY_NAME</span><br></pre></td></tr></table></figure>
<h4 id="可用版本-1"><a href="#可用版本-1" class="headerlink" title="可用版本"></a>可用版本</h4><p>&gt;= 2.6.0</p>
<h4 id="返回值-1"><a href="#返回值-1" class="headerlink" title="返回值"></a>返回值</h4><p>如果 key 不存在，那么返回 nil。否则，返回序列化之后的值。</p>
<h4 id="实例-1"><a href="#实例-1" class="headerlink" title="实例"></a>实例</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&gt; SET greeting &quot;helo,dumping world!&quot;</span><br><span class="line">OK</span><br><span class="line"></span><br><span class="line">&gt; DUMP greeting</span><br><span class="line">&quot;\x00\x15hello, dumping world!\x06\x00E\xa0Z\x82\xd8r\xc1\xde&quot;</span><br><span class="line"></span><br><span class="line">&gt; DUMP not-exists-key</span><br><span class="line">(nil)</span><br></pre></td></tr></table></figure>
<h3 id="Redis-EXISTS-命令"><a href="#Redis-EXISTS-命令" class="headerlink" title="Redis EXISTS 命令"></a>Redis EXISTS 命令</h3><p>Redis EXISTS 命令用于检查给定 key 是否存在。</p>
<h4 id="语法-4"><a href="#语法-4" class="headerlink" title="语法"></a>语法</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt; EXISTS KEY_NAME</span><br></pre></td></tr></table></figure>
<h4 id="可用版本-2"><a href="#可用版本-2" class="headerlink" title="可用版本"></a>可用版本</h4><p>&gt;= 1.0.0</p>
<h4 id="返回值-2"><a href="#返回值-2" class="headerlink" title="返回值"></a>返回值</h4><p>若 key 存在返回 1，否则返回 0。</p>
<h4 id="实例-2"><a href="#实例-2" class="headerlink" title="实例"></a>实例</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&gt; EXISTS runoob-new-key</span><br><span class="line">(integer) 0</span><br><span class="line"></span><br><span class="line">&gt; set runoob-new-key newKey</span><br><span class="line">OK</span><br><span class="line"></span><br><span class="line">&gt; EXISTS runoob-new-key</span><br><span class="line">(integer) 1</span><br></pre></td></tr></table></figure>
<h3 id="Redis-Expire-命令"><a href="#Redis-Expire-命令" class="headerlink" title="Redis Expire 命令"></a>Redis Expire 命令</h3><p>Redis Expire 命令用于设置 key 的过期时间，key 过期后将不再可用。单位以秒计。</p>
<h4 id="语法-5"><a href="#语法-5" class="headerlink" title="语法"></a>语法</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt; Expire KEY_NAME TIME_IN_SECONDS</span><br></pre></td></tr></table></figure>
<h4 id="可用版本-3"><a href="#可用版本-3" class="headerlink" title="可用版本"></a>可用版本</h4><p>&gt;= 1.0.0</p>
<h4 id="返回值-3"><a href="#返回值-3" class="headerlink" title="返回值"></a>返回值</h4><p>设置成功返回 1。当 key 不存在或者不能为 key 设置过期时间时（比如在低于 2.1.3 版本的 Redis 中你尝试更新 key 的过期时间）返回 0。</p>
<h4 id="实例-3"><a href="#实例-3" class="headerlink" title="实例"></a>实例</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt; SET runoobkey redis</span><br><span class="line">OK</span><br><span class="line"></span><br><span class="line">&gt; EXPIRE runoobkey 60</span><br><span class="line">(integer) 1</span><br></pre></td></tr></table></figure>
<p>以上实例中我们为键 runoobkey 设置了过期时间为 1 分钟，1 分钟后该键会自动删除。</p>
<h3 id="Redis-Keys-命令"><a href="#Redis-Keys-命令" class="headerlink" title="Redis Keys 命令"></a>Redis Keys 命令</h3><h4 id="语法-6"><a href="#语法-6" class="headerlink" title="语法"></a>语法</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt; KEYS PATTERN</span><br></pre></td></tr></table></figure>
<h4 id="可用版本-4"><a href="#可用版本-4" class="headerlink" title="可用版本"></a>可用版本</h4><p>&gt;= 1.0.0</p>
<h4 id="返回值-4"><a href="#返回值-4" class="headerlink" title="返回值"></a>返回值</h4><p>符合给定模式的 key 列表（Array）。</p>
<h4 id="实例-4"><a href="#实例-4" class="headerlink" title="实例"></a>实例</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&gt; SET runoob1 redis</span><br><span class="line">OK</span><br><span class="line"></span><br><span class="line">&gt; SET runoob2 mysql</span><br><span class="line">OK</span><br><span class="line"></span><br><span class="line">&gt; SET runoob3 mongodb</span><br><span class="line">OK</span><br><span class="line"></span><br><span class="line">&gt; KEYS runoob*</span><br><span class="line">1) &quot;runoob3&quot;</span><br><span class="line">2) &quot;runoob1&quot;</span><br><span class="line">3) &quot;runoob2&quot;</span><br><span class="line"></span><br><span class="line">&gt; KEYS *</span><br><span class="line">1) &quot;runoob3&quot;</span><br><span class="line">2) &quot;runoob1&quot;</span><br><span class="line">3) &quot;runoob2&quot;</span><br></pre></td></tr></table></figure>
<h3 id="Redis-Move-命令"><a href="#Redis-Move-命令" class="headerlink" title="Redis Move 命令"></a>Redis Move 命令</h3><p>Redis MOVE 命令用于将当前数据库的 key 移动到给定的数据库 db 当中。</p>
<h4 id="语法-7"><a href="#语法-7" class="headerlink" title="语法"></a>语法</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt; MOVE KEY_NAME DESTINATION_DATABASE</span><br></pre></td></tr></table></figure>
<h4 id="可用版本-5"><a href="#可用版本-5" class="headerlink" title="可用版本"></a>可用版本</h4><p>&gt;= 1.0.0</p>
<h4 id="返回值-5"><a href="#返回值-5" class="headerlink" title="返回值"></a>返回值</h4><p>移动成功返回 1，失败则返回 0。</p>
<h4 id="实例-5"><a href="#实例-5" class="headerlink" title="实例"></a>实例</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"># key 存在于当前数据库</span><br><span class="line">redis&gt; SELECT 0      # redis 默认使用数据库 0，为了清晰，这里再指定一次</span><br><span class="line">OK</span><br><span class="line"></span><br><span class="line">redis&gt; SET song &quot;secret base - Zone&quot;</span><br><span class="line">OK</span><br><span class="line"></span><br><span class="line">redis&gt; MOVE song 1       # 将 song 移动到数据库 1</span><br><span class="line">(integer) 1</span><br><span class="line"></span><br><span class="line">redis&gt; EXISTS song       # song 已经被移走</span><br><span class="line">(integer) 0</span><br><span class="line"></span><br><span class="line">redis&gt; SELECT 1          # 使用数据库 1</span><br><span class="line">OK</span><br><span class="line"></span><br><span class="line">redis:1&gt; EXISTS song       # 证实 song 被移到了数据库 1（注意命令提示符）</span><br><span class="line">(integer) 1</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 当 key 不存在的时候</span><br><span class="line"></span><br><span class="line">redis:1&gt; EXISTS fake_key</span><br><span class="line">(integer) 0</span><br><span class="line"></span><br><span class="line">redis:1&gt; MOVE fake_key 0</span><br><span class="line">(integer) 0</span><br><span class="line"></span><br><span class="line">redis:1&gt; select 0</span><br><span class="line">OK</span><br><span class="line"></span><br><span class="line">redis&gt; EXISTS fake_key</span><br><span class="line">(integer) 0</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 当源数据库和目标数据库有相同的 key 时</span><br><span class="line"></span><br><span class="line">redis&gt; SELECT 0</span><br><span class="line">OK</span><br><span class="line"></span><br><span class="line">redis&gt; SET favorite_fruit &quot;banana&quot;</span><br><span class="line">OK</span><br><span class="line"></span><br><span class="line">redis&gt; SELECT 1</span><br><span class="line">OK</span><br><span class="line"></span><br><span class="line">redis:1&gt; SET favorite_fruit &quot;apple&quot;</span><br><span class="line">OK</span><br><span class="line"></span><br><span class="line">redis:1&gt; SELECT 0</span><br><span class="line">OK</span><br><span class="line"></span><br><span class="line">redis&gt; MOVE favorite_fruit 1    # 两个数据库有相同的 key，MOVE 失败</span><br><span class="line">(integer) 0</span><br><span class="line"></span><br><span class="line">redis&gt; GET favorite_fruit</span><br><span class="line">&quot;banana&quot;</span><br><span class="line"></span><br><span class="line">redis&gt; SELECT 1</span><br><span class="line">OK</span><br><span class="line"></span><br><span class="line">redis:1&gt; GET favorite_fruit</span><br><span class="line">&quot;apple&quot;</span><br></pre></td></tr></table></figure>
<h3 id="Redis-PERSIST-命令"><a href="#Redis-PERSIST-命令" class="headerlink" title="Redis PERSIST 命令"></a>Redis PERSIST 命令</h3><p>Redis PERSIST 命令用于移除给定 key 的过期时间，使得 key 永不过期。</p>
<h4 id="语法-8"><a href="#语法-8" class="headerlink" title="语法"></a>语法</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt; PERSIST KEY_NAME</span><br></pre></td></tr></table></figure>
<h4 id="可用版本-6"><a href="#可用版本-6" class="headerlink" title="可用版本"></a>可用版本</h4><p>&gt;= 2.2.0</p>
<h4 id="返回值-6"><a href="#返回值-6" class="headerlink" title="返回值"></a>返回值</h4><p>当过期时间移除成功时，返回 1。如果 key 不存在或 key 没有设置过期时间，返回 0。</p>
<h4 id="实例-6"><a href="#实例-6" class="headerlink" title="实例"></a>实例</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&gt; SET mykey &quot;Hello&quot;</span><br><span class="line">OK</span><br><span class="line"></span><br><span class="line">&gt; EXPIRE mykey 10   # 为 key 设置生存时间</span><br><span class="line">(integer) 1</span><br><span class="line"></span><br><span class="line">&gt; TTL mykey</span><br><span class="line">(integer) 10</span><br><span class="line"></span><br><span class="line">&gt; PERSIST mykey     #移除 key 的生存时间</span><br><span class="line">(integer) 1</span><br><span class="line"></span><br><span class="line">&gt; TTL mykey</span><br><span class="line">(integer) -1</span><br></pre></td></tr></table></figure>
<h3 id="Redis-Pttl-命令"><a href="#Redis-Pttl-命令" class="headerlink" title="Redis Pttl 命令"></a>Redis Pttl 命令</h3><p>Redis Pttl 命令以毫秒为单位返回 key 的剩余过期时间。</p>
<h4 id="语法-9"><a href="#语法-9" class="headerlink" title="语法"></a>语法</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt; PTTL KEY_NAME</span><br></pre></td></tr></table></figure>
<h4 id="可用版本-7"><a href="#可用版本-7" class="headerlink" title="可用版本"></a>可用版本</h4><p>&gt;= 2.6.0</p>
<h4 id="返回值-7"><a href="#返回值-7" class="headerlink" title="返回值"></a>返回值</h4><p>当 key 不存在时，返回 -2。当 key 存在但没有设置剩余生存时间时，返回 -1。否则，以毫秒为单位，返回 key 的剩余生存时间。</p>
<blockquote>
<p>注意：在 Redis 2.8 以前，当 key 不存在，或者 key 没有设置剩余生存时间时，命令都返回 -1。</p>
</blockquote>
<h4 id="实例-7"><a href="#实例-7" class="headerlink" title="实例"></a>实例</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"># 不存在的 key</span><br><span class="line">&gt; FLUSHDB</span><br><span class="line">OK</span><br><span class="line"></span><br><span class="line">&gt; PTTL key</span><br><span class="line">(integer) -2</span><br><span class="line"></span><br><span class="line"># key 存在，但没有设置剩余生存时间</span><br><span class="line">&gt; SET key value</span><br><span class="line">OK</span><br><span class="line"></span><br><span class="line">&gt; PTTL key</span><br><span class="line">(integer) -1</span><br><span class="line"></span><br><span class="line"># 有剩余生存时间的 key</span><br><span class="line">&gt; PEXPIRE key 10086</span><br><span class="line">(integer) 1</span><br><span class="line"></span><br><span class="line">&gt; PTTL key</span><br><span class="line">(integer) 6179</span><br></pre></td></tr></table></figure>
<h3 id="Redis-TTL-命令"><a href="#Redis-TTL-命令" class="headerlink" title="Redis TTL 命令"></a>Redis TTL 命令</h3><p>与 PTTL 命令类似。</p>
<h3 id="Redis-RANDOMKEY-命令"><a href="#Redis-RANDOMKEY-命令" class="headerlink" title="Redis RANDOMKEY 命令"></a>Redis RANDOMKEY 命令</h3><p>Redis RANDOMKEY 命令从当前数据库中随机返回一个 key。</p>
<h4 id="语法-10"><a href="#语法-10" class="headerlink" title="语法"></a>语法</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt; RANDOMKEY</span><br></pre></td></tr></table></figure>
<h4 id="可用版本-8"><a href="#可用版本-8" class="headerlink" title="可用版本"></a>可用版本</h4><p>&gt;= 1.0.0</p>
<h4 id="返回值-8"><a href="#返回值-8" class="headerlink" title="返回值"></a>返回值</h4><p>当数据库不为空时，返回一个 key。当数据库为空时，返回 nil（windows 系统返回 null）。</p>
<h4 id="实例-8"><a href="#实例-8" class="headerlink" title="实例"></a>实例</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"># 数据库不为空</span><br><span class="line">&gt; MSET fruit &quot;apple&quot; drink &quot;beer&quot; food &quot;cookies&quot;    # 设置多个 key</span><br><span class="line">OK</span><br><span class="line"></span><br><span class="line">&gt; RANDOMKEY</span><br><span class="line">&quot;fruit&quot;</span><br><span class="line"></span><br><span class="line">&gt; RANDOMKEY</span><br><span class="line">&quot;food&quot;</span><br><span class="line"></span><br><span class="line">&gt; KEYS *    # 查看数据库内所有 key，证明 RANDOMKEY 并不删除 key</span><br><span class="line">1) &quot;food&quot;</span><br><span class="line">2) &quot;drink&quot;</span><br><span class="line">3) &quot;fruit&quot;</span><br><span class="line"></span><br><span class="line"># 数据库为空</span><br><span class="line">&gt; FLUSHDB   # 删除当前数据库所有 key</span><br><span class="line">OK</span><br><span class="line"></span><br><span class="line">&gt;RANDOMKEY</span><br><span class="line">(nil)</span><br></pre></td></tr></table></figure>
<h3 id="Redis-Rename-命令"><a href="#Redis-Rename-命令" class="headerlink" title="Redis Rename 命令"></a>Redis Rename 命令</h3><p>Redis Rename 命令用于修改 key 的名称。</p>
<h4 id="语法-11"><a href="#语法-11" class="headerlink" title="语法"></a>语法</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt; RENAME OLD_KEY_NAME NEW_KEY_NAME</span><br></pre></td></tr></table></figure>
<h4 id="可用版本-9"><a href="#可用版本-9" class="headerlink" title="可用版本"></a>可用版本</h4><p>&gt;= 1.0.0</p>
<h4 id="返回值-9"><a href="#返回值-9" class="headerlink" title="返回值"></a>返回值</h4><p>改名成功时提示 OK，失败时返回一个错误。</p>
<blockquote>
<p>当 OLD_KEY_NAME 和 NEW_KEY_NAME 相同，或者 OLD_KEY_NAME 不存在时，返回一个错误。<br>当 NEW_KEY_NAME 已经存在时，RENAME 命令将覆盖旧值。</p>
</blockquote>
<h4 id="实例-9"><a href="#实例-9" class="headerlink" title="实例"></a>实例</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"># key 存在且 newkey 不存在</span><br><span class="line">&gt; SET message &quot;hello world&quot;</span><br><span class="line">OK</span><br><span class="line"></span><br><span class="line">&gt; RENAME message greeting</span><br><span class="line">OK</span><br><span class="line"></span><br><span class="line">&gt; EXISTS message    # message 不复存在</span><br><span class="line">(integer) 0</span><br><span class="line"></span><br><span class="line">&gt; EXISTS greeting   # greeting 取而代之</span><br><span class="line"></span><br><span class="line">#当 key 不存在时，返回错误</span><br><span class="line">&gt; RENAME fake_key never_exists</span><br><span class="line">(error) ERR no such key</span><br><span class="line"></span><br><span class="line"># newkey 已存在时，RENAME 会覆盖旧 newkey</span><br><span class="line">&gt; SET pc &quot;lenovo&quot;</span><br><span class="line">OK</span><br><span class="line"></span><br><span class="line">&gt; SET personal_computer &quot;dell&quot;</span><br><span class="line">OK</span><br><span class="line"></span><br><span class="line">&gt; RENAME pc personal_computer</span><br><span class="line">OK</span><br><span class="line"></span><br><span class="line">&gt; GET pc</span><br><span class="line">(nil)</span><br><span class="line"></span><br><span class="line">&gt; GET personal_computer     # 原来的值 dell 倍覆盖了</span><br><span class="line">&quot;lenovo&quot;</span><br></pre></td></tr></table></figure>
<h3 id="Redis-Renamenx-命令"><a href="#Redis-Renamenx-命令" class="headerlink" title="Redis Renamenx 命令"></a>Redis Renamenx 命令</h3><p>Redis Renamenx 命令用于在新的 key 不存在时修改 key 的名称。</p>
<h4 id="语法-12"><a href="#语法-12" class="headerlink" title="语法"></a>语法</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt; RENAMENX OLD_KEYNAME NEW_KEY_NAME</span><br></pre></td></tr></table></figure>
<h4 id="可用版本-10"><a href="#可用版本-10" class="headerlink" title="可用版本"></a>可用版本</h4><p>&gt;= 1.0.0</p>
<h4 id="返回值-10"><a href="#返回值-10" class="headerlink" title="返回值"></a>返回值</h4><p>修改成功时，返回 1。如果 NEW_KEY_NAME 已经存在，返回 0。</p>
<h4 id="实例-10"><a href="#实例-10" class="headerlink" title="实例"></a>实例</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"># newkey 不存在，改名成功</span><br><span class="line">&gt; SET player &quot;MP1year&quot;</span><br><span class="line">OK</span><br><span class="line"></span><br><span class="line">&gt; EXISTS best_player</span><br><span class="line">(integer) 0</span><br><span class="line"></span><br><span class="line">&gt; RENAMENX player best_player</span><br><span class="line">(integer) 1</span><br><span class="line"></span><br><span class="line"># newkey 存在时，失败</span><br><span class="line">&gt; SET animal &quot;bear&quot;</span><br><span class="line">OK</span><br><span class="line"></span><br><span class="line">&gt; SET favorite_animal &quot;butterfly&quot;</span><br><span class="line">OK</span><br><span class="line"></span><br><span class="line">&gt; RENAMENX animal favorite_animal</span><br><span class="line">(integer) 0</span><br><span class="line"></span><br><span class="line">&gt; get animal</span><br><span class="line">&quot;bear&quot;</span><br><span class="line"></span><br><span class="line">&gt; get favorite_animal</span><br><span class="line">&quot;butterfly&quot;</span><br></pre></td></tr></table></figure>
<h3 id="Redis-Type-命令"><a href="#Redis-Type-命令" class="headerlink" title="Redis Type 命令"></a>Redis Type 命令</h3><p>用于返回 key 所存储的值的类型。</p>
<h4 id="语法-13"><a href="#语法-13" class="headerlink" title="语法"></a>语法</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt; TYPE KEY_NAME</span><br></pre></td></tr></table></figure>
<h4 id="可用版本-11"><a href="#可用版本-11" class="headerlink" title="可用版本"></a>可用版本</h4><p>&gt;= 1.0.0</p>
<h4 id="返回值-11"><a href="#返回值-11" class="headerlink" title="返回值"></a>返回值</h4><p>返回 key 的数据类型，数据类型有：</p>
<ul>
<li>none（key 不存在）</li>
<li>string</li>
<li>list</li>
<li>set</li>
<li>zset</li>
<li>hash</li>
</ul>
<h4 id="实例-11"><a href="#实例-11" class="headerlink" title="实例"></a>实例</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"># 字符串</span><br><span class="line">&gt; SET weather &quot;sunny&quot;</span><br><span class="line">OK</span><br><span class="line"></span><br><span class="line">&gt; TYPE weather</span><br><span class="line">string</span><br><span class="line"></span><br><span class="line"># 列表</span><br><span class="line">&gt; LPUSH book_list &quot;programming in scala&quot;</span><br><span class="line">(integer) 1</span><br><span class="line"></span><br><span class="line">&gt; TYPE book_list</span><br><span class="line">list</span><br><span class="line"></span><br><span class="line"># 集合</span><br><span class="line">&gt; SADD pat &quot;dog&quot;</span><br><span class="line">(integer) 1</span><br><span class="line"></span><br><span class="line">&gt; TYPE pat</span><br><span class="line">set</span><br></pre></td></tr></table></figure>
<h2 id="Redis-字符串-命令详情"><a href="#Redis-字符串-命令详情" class="headerlink" title="Redis 字符串 命令详情"></a>Redis 字符串 命令详情</h2><h3 id="Redis-SET-命令"><a href="#Redis-SET-命令" class="headerlink" title="Redis SET 命令"></a>Redis SET 命令</h3><p>Redis SET 命令用于设置给定 key 的值。如果 key 已经存储其他值，SET 就覆写旧值，且无视类型。</p>
<h4 id="语法-14"><a href="#语法-14" class="headerlink" title="语法"></a>语法</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt; SET KEY_NAME VALUE</span><br></pre></td></tr></table></figure>
<h4 id="可用版本-12"><a href="#可用版本-12" class="headerlink" title="可用版本"></a>可用版本</h4><p>&gt;= 1.0.0</p>
<h4 id="返回值-12"><a href="#返回值-12" class="headerlink" title="返回值"></a>返回值</h4><ul>
<li>在 Redis 2.6.12 以前版本，SET 命令总是返回 OK。</li>
<li>从 Redis 2.6.12 版本开始，SET 在设置操作成功完成时，才返回 OK。</li>
</ul>
<h4 id="实例-12"><a href="#实例-12" class="headerlink" title="实例"></a>实例</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># 对不存在的键进行设置</span><br><span class="line">&gt; SET key &quot;value&quot;</span><br><span class="line">OK</span><br><span class="line"></span><br><span class="line">&gt; GET key</span><br><span class="line">&quot;value&quot;</span><br><span class="line"></span><br><span class="line"># 对已存在的键进行设置</span><br><span class="line">&gt; SET key &quot;new-value&quot;</span><br><span class="line">OK</span><br><span class="line"></span><br><span class="line">&gt; GET key</span><br><span class="line">&quot;new-value&quot;</span><br></pre></td></tr></table></figure>
<h1 id="其他文章"><a href="#其他文章" class="headerlink" title="其他文章"></a>其他文章</h1><ul>
<li><a href="https://blog.csdn.net/hongwei15732623364/article/details/72356299" target="_blank" rel="noopener">【Redis】Redis入门了解</a></li>
<li><a href="https://www.cnblogs.com/zhoujinyi/p/5570024.html" target="_blank" rel="noopener">Redis 复制、Sentinel的搭建和原理说明</a></li>
<li><a href="https://blog.csdn.net/men_wen/article/details/72853078" target="_blank" rel="noopener">Redis 学习笔记（十四）Redis Cluster介绍与搭建</a></li>
<li><a href="https://juejin.im/post/5b516dc75188251af363492d" target="_blank" rel="noopener">为什么要用Redis</a></li>
<li><a href="https://juejin.im/post/5b53ee7e5188251aaa2d2e16" target="_blank" rel="noopener">通俗易懂的Reids数据结构基础</a></li>
<li><a href="https://juejin.im/post/5b99d4bce51d450e7a24b66e" target="_blank" rel="noopener">互联网公司面试必问的Redis题目</a></li>
<li><a href="https://www.jianshu.com/p/19cfc2343121" target="_blank" rel="noopener">超详细Redis入门教程</a></li>
</ul>

</div>


      </div>
      
  	</div>

    <!-- After footer scripts -->
    <script src="https://code.jquery.com/jquery-3.1.1.slim.min.js" integrity="sha384-A7FZj7v+d/sdmMqp/nOQwliLvUsJfDHW+k9Omg/a/EheAdgtzNs3hpfag6Ed950n" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js" integrity="sha384-DztdAPBWPRXSA/3eYEEUWrWCy7G5KFbe8fFjk5JAIxUYHKkDx6Qin1DkWx51bBrb" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js" integrity="sha384-vBWWzlZJ8ea9aCX4pEW3rVHjgjt7zpkNpZk+02D9phzyeVkE+jo0ieGizqPLForn" crossorigin="anonymous"></script>

  </body>
</html>
